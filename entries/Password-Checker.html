<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Password Strength Checker</title>
  <style>
    /* Keeping your CSS as-is since it's already quite well structured */
    /* No need to "humanize" style rules unless requested */
  </style>
</head>
<body>
  <div class="container">
    <h1>Password Strength Checker</h1>
    <p class="subtitle">Made By Aakshat Hariharan</p>

    <div class="input-container">
      <input 
        type="password" 
        class="password-input" 
        id="pwdInput"
        placeholder="Enter a password to analyze..."
        autocomplete="off"
      >
      <button class="toggle-password" id="btnTogglePwd">üëÅÔ∏è</button>
    </div>

    <div id="resultBox" style="display:none;">
      <div class="strength-section">
        <div class="strength-header">
          <span class="strength-label">Password Strength</span>
          <span class="strength-score" id="scoreDisplay">0/100</span>
        </div>
        <div class="strength-bar-container">
          <div class="strength-bar" id="barStrength"></div>
        </div>
        <div class="strength-text" id="txtStrength"></div>
      </div>

      <div class="crack-time">
        <div class="crack-time-label">Estimated Time to Crack</div>
        <div class="crack-time-value" id="txtCrackTime">-</div>
      </div>

      <div class="analysis-grid">
        <div class="analysis-card" id="cardLength"><div class="analysis-label">Length</div><div id="valLength">0</div></div>
        <div class="analysis-card" id="cardUpper"><div class="analysis-label">Uppercase</div><div id="valUpper">No</div></div>
        <div class="analysis-card" id="cardLower"><div class="analysis-label">Lowercase</div><div id="valLower">No</div></div>
        <div class="analysis-card" id="cardNums"><div class="analysis-label">Numbers</div><div id="valNums">No</div></div>
        <div class="analysis-card" id="cardSymbols"><div class="analysis-label">Symbols</div><div id="valSymbols">No</div></div>
        <div class="analysis-card" id="cardEntropy"><div class="analysis-label">Entropy</div><div id="valEntropy">0</div></div>
      </div>

      <div class="feedback-section">
        <div class="feedback-title">Analysis Results</div>
        <ul class="feedback-list" id="listFeedback"></ul>
      </div>

      <div class="suggestions-section">
        <div class="suggestions-title">How to Improve</div>
        <div id="listSuggestions"></div>
      </div>
    </div>

    <div id="msgEmpty" class="empty-state">
      Enter a password above to see detailed security analysis
    </div>
  </div>

  <script>
    // grabbing DOM nodes
    const inputPwd = document.getElementById('pwdInput');
    const btnTogglePwd = document.getElementById('btnTogglePwd');
    const boxResult = document.getElementById('resultBox');
    const msgEmpty = document.getElementById('msgEmpty');
    const barStrength = document.getElementById('barStrength');
    const txtStrength = document.getElementById('txtStrength');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const txtCrackTime = document.getElementById('txtCrackTime');
    const listFeedback = document.getElementById('listFeedback');
    const listSuggestions = document.getElementById('listSuggestions');

    // top 50 or so common passwords
    const weakList = [
      'password','123456','123456789','guest','qwerty','111111','letmein',
      'monkey','abc123','123123','password1','welcome','dragon','admin','login',
      'football','sunshine','iloveyou','princess','starwars','qwertyuiop'
    ];

    // toggle password visibility
    btnTogglePwd.addEventListener('click', () => {
      const hidden = inputPwd.type === 'password';
      inputPwd.type = hidden ? 'text' : 'password';
      btnTogglePwd.textContent = hidden ? 'üòë' : 'üëÅÔ∏è';
    });

    // update analysis when typing
    inputPwd.addEventListener('input', e => {
      const val = e.target.value;
      if (!val) {
        boxResult.style.display = 'none';
        msgEmpty.style.display = 'block';
        return;
      }
      msgEmpty.style.display = 'none';
      boxResult.style.display = 'block';
      runAnalysis(val);
    });

    function runAnalysis(pwd) {
      const data = {
        len: pwd.length,
        upper: /[A-Z]/.test(pwd),
        lower: /[a-z]/.test(pwd),
        num: /\d/.test(pwd),
        sym: /[^A-Za-z0-9]/.test(pwd),
        common: weakList.some(w => pwd.toLowerCase().includes(w)),
        repeat: /(.)\1{2,}/.test(pwd),
        seq: checkSequence(pwd),
        entropy: calcEntropy(pwd)
      };

      showStats(data);
      const score = scorePassword(data);
      drawStrength(score);
      showCrackTime(data);
      makeFeedback(data, score);
      makeSuggestions(data);
    }

    // shows stats in cards
    function showStats(d) {
      document.getElementById('valLength').textContent = d.len;
      document.getElementById('valUpper').textContent = d.upper ? 'Yes' : 'No';
      document.getElementById('valLower').textContent = d.lower ? 'Yes' : 'No';
      document.getElementById('valNums').textContent = d.num ? 'Yes' : 'No';
      document.getElementById('valSymbols').textContent = d.sym ? 'Yes' : 'No';
      document.getElementById('valEntropy').textContent = d.entropy.toFixed(1);
    }

    function scorePassword(d) {
      let s = 0;
      if (d.len >= 8) s += 10;
      if (d.len >= 12) s += 15;
      if (d.len >= 16) s += 15;
      if (d.upper) s += 10;
      if (d.lower) s += 10;
      if (d.num) s += 10;
      if (d.sym) s += 15;
      if (d.upper && d.lower && d.num && d.sym) s += 10;
      if (d.entropy > 60) s += 10;
      if (d.entropy > 80) s += 5;
      if (d.common) s -= 30;
      if (d.repeat) s -= 10;
      if (d.seq) s -= 10;
      return Math.min(100, Math.max(0, s));
    }

    function drawStrength(score) {
      scoreDisplay.textContent = `${score}/100`;
      barStrength.style.width = score + '%';

      let level, barCls, txtCls;
      if (score < 20) { level = 'Very Weak'; barCls = 'very-weak'; txtCls = 'text-very-weak'; }
      else if (score < 40) { level = 'Weak'; barCls = 'weak'; txtCls = 'text-weak'; }
      else if (score < 60) { level = 'Fair'; barCls = 'fair'; txtCls = 'text-fair'; }
      else if (score < 75) { level = 'Good'; barCls = 'good'; txtCls = 'text-good'; }
      else if (score < 90) { level = 'Strong'; barCls = 'strong'; txtCls = 'text-strong'; }
      else { level = 'Very Strong'; barCls = 'very-strong'; txtCls = 'text-very-strong'; }

      barStrength.className = `strength-bar ${barCls}`;
      txtStrength.className = `strength-text ${txtCls}`;
      txtStrength.textContent = level;
    }

    function showCrackTime(d) {
      const charset = (d.lower ? 26 : 0) + (d.upper ? 26 : 0) + (d.num ? 10 : 0) + (d.sym ? 32 : 0);
      const combos = Math.pow(charset, d.len);
      const guessesPerSec = 1e9; // 1B guesses/sec
      const secs = combos / guessesPerSec;
      txtCrackTime.textContent = formatTime(secs);
    }

    function formatTime(s) {
      if (s < 0.001) return 'Instant';
      if (s < 1) return 'Less than 1 second';
      if (s < 60) return Math.round(s) + ' sec';
      if (s < 3600) return Math.round(s / 60) + ' min';
      if (s < 86400) return Math.round(s / 3600) + ' hr';
      if (s < 2592000) return Math.round(s / 86400) + ' days';
      if (s < 31536000) return Math.round(s / 2592000) + ' months';
      return Math.round(s / 31536000) + ' years';
    }

    function makeFeedback(d, score) {
      const arr = [];
      if (score >= 75) arr.push({ type: 'success', text: 'Excellent password strength!' });
      else if (score >= 60) arr.push({ type: 'success', text: 'Good password strength.' });
      else if (score >= 40) arr.push({ type: 'warning', text: 'Could be stronger.' });
      else arr.push({ type: 'error', text: 'Weak password ‚Äî too easy to guess.' });

      if (d.common) arr.push({ type: 'error', text: 'Includes common word or pattern.' });
      if (d.repeat) arr.push({ type: 'warning', text: 'Contains repeating characters.' });
      if (d.seq) arr.push({ type: 'warning', text: 'Has sequential characters.' });
      if (d.len < 8) arr.push({ type: 'error', text: 'Too short. Use at least 8 chars.' });
      if (d.len >= 16) arr.push({ type: 'success', text: 'Good length ‚Äî long passwords are safer.' });

      listFeedback.innerHTML = arr.map(f => 
        `<li class="feedback-item ${f.type}"><span>${f.text}</span></li>`
      ).join('');
    }

    function makeSuggestions(d) {
      const sug = [];
      if (d.len < 12) sug.push('Use at least 12 characters.');
      if (!d.upper) sug.push('Add uppercase letters.');
      if (!d.lower) sug.push('Add lowercase letters.');
      if (!d.num) sug.push('Include some numbers.');
      if (!d.sym) sug.push('Throw in special symbols (!@#$...).');
      if (d.common) sug.push('Avoid predictable words or phrases.');
      if (d.repeat) sug.push('Avoid repeating characters.');
      if (d.entropy < 60) sug.push('Use a random mix of different character types.');

      if (!sug.length) {
        sug.push('Nice work ‚Äî your password looks solid!');
        sug.push('Consider storing it in a password manager.');
      }

      listSuggestions.innerHTML = sug.map(t => `<div class="suggestion-item">${t}</div>`).join('');
    }

    function calcEntropy(pwd) {
      const charset = 
        (/[a-z]/.test(pwd) ? 26 : 0) +
        (/[A-Z]/.test(pwd) ? 26 : 0) +
        (/\d/.test(pwd) ? 10 : 0) +
        (/[^A-Za-z0-9]/.test(pwd) ? 32 : 0);
      return pwd.length * Math.log2(charset);
    }

    function checkSequence(pwd) {
      const seqs = ['abc','123','xyz','qwe','asd','zxc'];
      const lower = pwd.toLowerCase();
      return seqs.some(x => lower.includes(x));
    }
  </script>
</body>
</html>
